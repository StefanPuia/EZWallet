
create database EZWallet;

create table user (
  id int primary key auto_increment,
  fname varchar(50) not null,
  lname varchar(50) not null,
  email varchar(255) not null,
  token varchar(64) not null
);

create table category (
  id int primary key auto_increment,
  cname varchar(20) not null,
  icon varchar(100)
);

create table transaction (
  id int primary key auto_increment,
  user int not null,
  amount decimal not null,
  description varchar(100),
  tdate date not null,
  category int not null,
  image varchar(200),
  foreign key(category) references category(id),
  foreign key(user) references user(id)
);

create table balance (
    id int primary key auto_increment,
    user int not null,
    bdate date not null,
    amount decimal not null,
    foreign key(user) references user(id)
);

insert into user(fname, lname, email, token) 
  values ('James', 'Coyle', 'jamescoyle@mail.com', '123456');

insert into user(fname, lname, email, token, budget) 
  values ('John', 'Smith', 'johnsmith@mail.com', '654321');

insert into balance(user, bdate, amount) 
  values (1, '2018/01/01', 60)

insert into category(cname) values ('groceries');

insert into category(cname) 
  values ('transport');

insert into transaction(user, amount, description, tdate, category, image) 
  values (1, 20, 'shopping', '2018/01/01', 1);

insert into transaction(user, amount, description, tdate, category, image) 
  values (1, 15, 'travel', '2017/11/12', 2);

select amount, description, tdate, category, image
  from transaction, user
  where user = 1
  order by tdate asc;

select tname, amount, description, tdate, category, image
  from transaction, user
  where user = 1
  order by tdate desc;

update balance 
  set amount = 100 
  where user = 1;
